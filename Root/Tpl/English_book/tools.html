<script>
    //获取书籍章节URL
    function book_get_list(){
        $.ajax({
            url: '__URL__-book_get_list',
            type: 'POST',
            data: {

            },
            dataType: 'json',
            timeout: 250000,//1000毫秒后超时
            cache: false,//不缓存数据
            async: true,//同步：false,异步：true,默认true
            success: function(data){
                console.log('T:' + data.t + ' K:' + data.k + ' F:' + data.f);
            },//请求成功后执行
            complete: function(){
                setTimeout('book_get_list();', 4000);
            },
        });
    }

    //获取书籍章节单词
    function book_get_list_en(){
        $.ajax({
            url: '__URL__-book_get_list_en',
            type: 'POST',
            data: {

            },
            dataType: 'json',
            timeout: 250000,//1000毫秒后超时
            cache: false,//不缓存数据
            async: true,//同步：false,异步：true,默认true
            success: function(data){
                console.log('T:' + data.t + ' K:' + data.k + ' F:' + data.f + ' ids:' + data.ids);
            },//请求成功后执行
            complete: function(){
                setTimeout('book_get_list_en();', 500);
            },
        });
    }

    //书籍章节单词入库
    function book_word_in(){
        $.ajax({
            url: '__URL__-book_word_in',
            type: 'POST',
            data: {

            },
            dataType: 'json',
            timeout: 250000,//1000毫秒后超时
            cache: false,//不缓存数据
            async: true,//同步：false,异步：true,默认true
            success: function(data){
                var all = data.all;
                var state = data.state;

                console.log('----Fail: ' + all.f + ' ----Success: ' + all.t);
                for(var i = 0; i < state.length; i++){
                    console.log('----ID: ' + state[i].id + ' ----count: ' + state[i].count + ' ----Su: ' + state[i].su + ' ----Fa: ' + state[i].fa);
                }
                console.log('---------------------------------------------------------');
            },//请求成功后执行
            complete: function(){
                setTimeout('book_word_in();', 2000);
            },
        });
    }


    //书籍章节单词解析
    function book_word_save_cn_sym(){
        var sym = true;
        $.ajax({
            url: '__URL__-book_word_save_cn_sym',
            type: 'POST',
            data: {

            },
            dataType: 'json',
            timeout: 250000,//1000毫秒后超时
            cache: false,//不缓存数据
            async: true,//同步：false,异步：true,默认true
            success: function(data){
                if(data.state == 'none') sym = false;
                console.log('----Fail: ' + data.f + ' ----k: ' + data.k + ' ----all: ' + data.all + ' ----state: ' + data.state);
                console.log('--------Fail_str:' + data.fail_str);
            },//请求成功后执行
            complete: function(){
                if(sym) setTimeout('book_word_save_cn_sym();', 500);
            },
        });
    }

    //书籍章节单词解析-修补
    function book_word_repair_cn_sym(){
        var sym = true;
        $.ajax({
            url: '__URL__-book_word_repair_cn_sym',
            type: 'POST',
            data: {

            },
            dataType: 'json',
            timeout: 250000,//1000毫秒后超时
            cache: false,//不缓存数据
            async: true,//同步：false,异步：true,默认true
            success: function(data){
                if(data.state == 'none') sym = false;
                console.log('----p: ' + data.p + ' ----k: ' + data.k + ' ----all: ' + data.all);
            },//请求成功后执行
            complete: function(){
                if(sym) setTimeout('book_word_repair_cn_sym();', 500);
            },
        });
    }

    //书籍章节单词生成JSON文件
    function book_chapter_create_json(){
        var sym = true;
        $.ajax({
            url: '__URL__-book_chapter_create_json',
            type: 'POST',
            data: {

            },
            dataType: 'json',
            timeout: 250000,//1000毫秒后超时
            cache: false,//不缓存数据
            async: true,//同步：false,异步：true,默认true
            success: function(data){
                if(data.state == 'none') sym = false;
                console.log('----f: ' + data.f + ' ----t: ' + data.t);
            },//请求成功后执行
            complete: function(){
                if(sym) setTimeout('book_chapter_create_json();', 500);
            },
        });
    }
</script>